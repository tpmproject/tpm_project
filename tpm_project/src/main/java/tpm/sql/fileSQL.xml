<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tpm.file">
	<!--파일 리스트  -->
	<select id="allList" parameterType="int" resultType="tpm.file.model.FileDTO">
		select * from tpm_file 
		where project_idx=#{project_idx}
		
	</select>
	
    <select id="fileList" parameterType="Map" resultType="tpm.file.model.FileDTO">
		select * from tpm_file
		where project_idx=#{project_idx} and file_name like '%${search_text}%'
	</select>
	
	<!--업무 파일 리스트  -->
	<select id="workFileList" parameterType="Map" resultType="tpm.file.model.FileDTO">
		
		select * from tpm_file
		where project_idx=${project_idx} and work_idx=${work_idx}
		
	</select>
	


	<select id="fileList_sort" parameterType="Map" resultType="tpm.file.model.FileDTO">
		select * from tpm_file
		where project_idx= #{project_idx} and file_name like '%${search_text}%'
		order by ${line_name} ${sort}
	</select>
	<!-- 파일등록  -->
	<insert id="addFile" parameterType="tpm.file.model.FileDTO">
		insert into tpm_file values (file_idx.nextval,#{project_idx},#{work_idx},#{member_idx},#{file_name},#{file_size},sysdate,#{file_path})
	</insert>
	<delete id="delFile" parameterType="int">
		delete tpm_file 
		where file_idx=#{file_idx}
	</delete>
</mapper>